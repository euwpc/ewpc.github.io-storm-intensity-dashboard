<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Storm Viewer</title>
  <style>
    body {
      background: #0d2320;
      color: #fff;
      font-family: "Orbitron", sans-serif;
      text-align: center;
      margin: 0;
    }

    .navbar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #0a1918;
      padding: 10px 30px;
      box-shadow: 0 0 10px #000;
    }

    .navbar h1 {
      font-size: 1.5rem;
      margin: 0;
    }

    .navbar a {
      color: #00ff80;
      margin-left: 20px;
      text-decoration: none;
      font-weight: bold;
    }

    #stormSelect {
      padding: 8px;
      font-size: 1rem;
      border-radius: 6px;
      border: none;
    }

    .container {
      margin-top: 50px;
    }

    .info-header {
      text-align: center;
    }

    .info-line {
      width: 60px;
      height: 3px;
      background: #00ff80;
      margin: 10px auto;
      border-radius: 3px;
    }

    .gauges {
      display: flex;
      justify-content: center;
      gap: 100px;
      margin-top: 40px;
    }

    .gauge {
      position: relative;
      width: 180px;
      height: 180px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    svg {
      width: 180px;
      height: 180px;
      transform: rotate(-90deg);
    }

    circle {
      fill: none;
      stroke-width: 10;
      stroke-linecap: round;
      cx: 90;
      cy: 90;
      r: 70;
    }

    .bg {
      stroke: #111;
    }

    .progress {
      stroke: #00ff80;
      stroke-dasharray: 440;
      stroke-dashoffset: 440;
      transition: stroke 0.3s, stroke-dashoffset 0.5s;
    }

    .gauge-value {
      position: absolute;
      top: 60px;
      left: 0;
      right: 0;
      font-size: 2rem;
      font-weight: bold;
      text-align: center;
    }

    .note {
      margin-top: 50px;
      font-size: 0.9rem;
      opacity: 0.8;
    }

    input[type="range"] {
      width: 300px;
      margin-top: 30px;
    }
  </style>
</head>
<body>
  <div class="navbar">
    <h1>Storm Viewer</h1>
    <div>
      <a href="index.html">Home</a>
      <a href="glossary.html">Glossary</a>
      <a href="archives.html">Archives</a>
    </div>
  </div>

  <div class="container">
    <h2>Select Storm</h2>
    <select id="stormSelect">
      <option value="storm1">Storm Alpha</option>
      <option value="storm2">Storm Bravo</option>
      <option value="storm3">Storm Charlie</option>
    </select>

    <div class="info-header">
      <h2>Current Information</h2>
      <div class="info-line"></div>
    </div>

    <div class="gauges">
      <div class="gauge">
        <svg>
          <circle class="bg"></circle>
          <circle class="progress" id="windCircle"></circle>
        </svg>
        <div class="gauge-value" id="windValue">-- km/h</div>
        <div class="label">Wind</div>
      </div>

      <div class="gauge">
        <svg>
          <circle class="bg"></circle>
          <circle class="progress" id="pressureCircle"></circle>
        </svg>
        <div class="gauge-value" id="pressureValue">-- hPa</div>
        <div class="label">Pressure</div>
      </div>
    </div>

    <input type="range" id="timeSlider" min="0" max="4" value="0" />
    <p id="timeLabel">Time: 00Z</p>

    <p class="note">
      NOTE: This page is inspired by KnackWX. We also encourage mobile users to turn on "Desktop site" mode when viewing this page.
    </p>
  </div>

  <script>
    const storms = {
      storm1: {
        name: "Storm Alpha",
        data: [
          { time: "00Z", wind: 50, pressure: 1008 },
          { time: "06Z", wind: 80, pressure: 995 },
          { time: "12Z", wind: 120, pressure: 970 },
          { time: "18Z", wind: 140, pressure: 950 },
          { time: "24Z", wind: 160, pressure: 930 },
        ],
      },
      storm2: {
        name: "Storm Bravo",
        data: [
          { time: "00Z", wind: 40, pressure: 1010 },
          { time: "06Z", wind: 65, pressure: 990 },
          { time: "12Z", wind: 100, pressure: 970 },
          { time: "18Z", wind: 130, pressure: 940 },
          { time: "24Z", wind: 145, pressure: 925 },
        ],
      },
      storm3: {
        name: "Storm Charlie",
        data: [
          { time: "00Z", wind: 60, pressure: 1005 },
          { time: "06Z", wind: 90, pressure: 985 },
          { time: "12Z", wind: 110, pressure: 970 },
          { time: "18Z", wind: 135, pressure: 940 },
          { time: "24Z", wind: 150, pressure: 930 },
        ],
      },
    };

    const windCircle = document.getElementById("windCircle");
    const pressureCircle = document.getElementById("pressureCircle");
    const windValue = document.getElementById("windValue");
    const pressureValue = document.getElementById("pressureValue");
    const stormSelect = document.getElementById("stormSelect");
    const timeSlider = document.getElementById("timeSlider");
    const timeLabel = document.getElementById("timeLabel");

    const circumference = 440;

    function setGauge(circle, value, min, max, colorFunc) {
      const clamped = Math.min(Math.max(value, min), max);
      const progress = ((clamped - min) / (max - min)) * circumference;
      const offset = circumference - progress;
      circle.style.strokeDashoffset = offset;
      circle.style.stroke = colorFunc(clamped);
    }

    function windColor(wind) {
      if (wind < 60) return "#00ff80";
      if (wind < 90) return "#80ff00";
      if (wind < 120) return "#ffff00";
      if (wind < 140) return "#ff8000";
      return "#ff0000";
    }

    function pressureColor(pressure) {
      if (pressure > 1000) return "#00ff80";
      if (pressure > 980) return "#80ff00";
      if (pressure > 960) return "#ffff00";
      if (pressure > 940) return "#ff8000";
      return "#ff0000";
    }

    function updateDisplay() {
      const storm = storms[stormSelect.value];
      const point = storm.data[timeSlider.value];
      timeLabel.textContent = `Time: ${point.time}`;
      windValue.textContent = `${point.wind} km/h`;
      pressureValue.textContent = `${point.pressure} hPa`;

      setGauge(windCircle, point.wind, 40, 140, windColor);
      setGauge(pressureCircle, 1010 - (point.pressure - 925), 0, 85, () =>
        pressureColor(point.pressure)
      );
    }

    stormSelect.addEventListener("change", updateDisplay);
    timeSlider.addEventListener("input", updateDisplay);

    updateDisplay();
  </script>
</body>
</html>
